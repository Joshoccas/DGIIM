/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

#include <iostream>
#include <string>
#include <gtest/gtest.h>
#include "MPTests.h"

#ifdef __INTEGRATION__

using namespace std;


TEST_F(_01_Basics, Integrated_5_records)  {   
    DEF_EXECUTION_ENVIRONMENT(ECommerce5);
    EXPECTED_OUTPUT(
[eventS] 5 3788922744450141172
[purchaseSet] 0 6142509188972423790
[weeklyData] 7 SUNDAY( 0.00) MONDAY( 0.00) TUESDAY( 0.00) WEDNESDAY( 0.00) THURSDAY( 0.00) FRIDAY( 0.00) SATURDAY( 0.00) 
[brandData] 0 
[usersData] 0 
);
    CALL_FROM_FILE("")<<"Simple test with five records only and no purchase"<<endl;
}

TEST_F(_01_Basics, Integrated_49_records)  {   
    DEF_EXECUTION_ENVIRONMENT(ECommerce49);
    EXPECTED_OUTPUT(
[eventS] 49 9582204321881485038
[purchaseSet] 6 12003309466084639515
[weeklyData] 7 SUNDAY( 0.00) MONDAY( 0.00) TUESDAY( 6.00) WEDNESDAY( 0.00) THURSDAY( 0.00) FRIDAY( 0.00) SATURDAY( 0.00) 
[brandData] 2 italwax(11.56) (32.69) 
[usersData] 1 429179215( 6.00) 

);
    CALL_FROM_FILE("")<<"Simple test with 49 records only with 6 purchases"<<endl;
}

TEST_F(_01_Basics, Integrated_200_records)  {   
    DEF_EXECUTION_ENVIRONMENT(ECommerce_all_all_200);
    EXPECTED_OUTPUT(
[eventS] 200 12448305775574223660
[purchaseSet] 10 10835834335209909704
[weeklyData] 7 SUNDAY( 1.00) MONDAY( 1.00) TUESDAY( 1.00) WEDNESDAY( 2.00) THURSDAY( 1.00) FRIDAY( 4.00) SATURDAY( 0.00) 
[brandData] 8 (13.26) runail( 0.32) irisk( 2.54) refectocil( 7.46) nagaraku( 7.94) de.lux( 2.86) masura( 1.73) kinetics(10.32) 
[usersData] 10 440465199( 1.00) 538197388( 1.00) 548131007( 1.00) 564003886( 1.00) 511623094( 1.00) 542688176( 1.00) 561383056( 1.00) 561013521( 1.00) 446140088( 1.00) 616989279( 1.00) 
);
    CALL_FROM_FILE("")<<"Simple test with 200 records and 10 purchases"<<endl;
}

TEST_F(_01_Basics, Integrated_500_records)  {   
    DEF_EXECUTION_ENVIRONMENT(ECommerce_all_all_500);
    USE_MEMORY_LEAKS(__VALGRIND__);
    EXPECTED_OUTPUT(
[eventS] 500 6666281081704581576
[purchaseSet] 30 5235127575259468424
[weeklyData] 7 SUNDAY( 1.00) MONDAY( 4.00) TUESDAY( 6.00) WEDNESDAY( 5.00) THURSDAY( 6.00) FRIDAY( 5.00) SATURDAY( 3.00) 
[brandData] 18 uskusi( 3.97) staleks( 2.46) milv( 0.79) bpw.style( 0.95) domix( 6.28) (49.95) bluesky( 3.97) cosmoprofi( 4.76) irisk( 2.48) uno( 7.78) runail( 8.75) estel( 2.38) fancy( 5.71) browxenna(19.52) limoni( 6.84) masura( 1.73) grattol( 1.90) rosi(12.70) 
[usersData] 30 525972312( 1.00) 558384972( 1.00) 505642737( 1.00) 537657392( 1.00) 265922658( 1.00) 532031134( 1.00) 568590376( 1.00) 560934386( 1.00) 606488864( 1.00) 466364373( 1.00) 549221392( 1.00) 509105449( 1.00) 551797846( 1.00) 514161649( 1.00) 462025793( 1.00) 439251968( 1.00) 558894174( 1.00) 604100373( 1.00) 456131229( 1.00) 602984937( 1.00) 538197388( 1.00) 566746898( 1.00) 303281558( 1.00) 468092362( 1.00) 582416929( 1.00) 565980020( 1.00) 432435010( 1.00) 540621761( 1.00) 582530115( 1.00) 545999008( 1.00) 
);
    CALL_FROM_FILE("")<<"Simple test with 500 records and 30 purchases"<<endl;
}

TEST_F(_01_Basics, Integrated_300_records)  {   
    DEF_EXECUTION_ENVIRONMENT(ECommerce_all_all_300);
    USE_MEMORY_LEAKS(__VALGRIND__);
    EXPECTED_OUTPUT(
[eventS] 300 17922222056063335357
[purchaseSet] 300 17922222056063335357
[weeklyData] 7 SUNDAY(41.00) MONDAY(42.00) TUESDAY(41.00) WEDNESDAY(36.00) THURSDAY(47.00) FRIDAY(53.00) SATURDAY(40.00) 
[brandData] 53 (643.33) irisk(75.78) italwax(45.17) staleks( 7.30) airnails(13.49) runail(219.86) grattol(86.91) kapous(11.70) dewal(61.02) happyfons( 5.87) cosmoprofi(40.48) yoko(17.78) beautix(25.08) dermal( 2.06) ingarden(29.20) masura(20.28) lovely(26.96) bpw.style( 7.38) lamixx( 9.37) severina( 1.06) estel(41.94) pole( 4.11) nagaraku(15.40) haruyama(11.70) pnb( 6.67) jessnail(100.62) bluesky(16.67) entity( 1.13) orly( 1.98) f.o.x(12.32) uno(21.27) solomeya(10.95) rosi( 9.04) levrana(16.11) enigma(13.17) de.lux( 2.86) milv( 0.71) lador( 2.25) i-laq( 4.14) swarovski( 2.06) konad( 1.90) provoc(11.81) matrix(19.84) lianail( 6.33) shik( 7.14) shary( 2.06) domix(13.87) kaypro(25.00) cnd( 9.97) refectocil( 7.46) elskin( 2.08) uskusi( 3.97) oniq(10.79) 
[usersData] 206 566746898( 1.00) 432435010( 3.00) 579290686( 1.00) 446104595( 2.00) 250276384( 3.00) 349436095( 3.00) 606488864( 6.00) 518987624( 2.00) 296530631( 1.00) 603260665( 2.00) 593353645( 1.00) 498311174( 1.00) 584570411( 1.00) 574308787( 1.00) 233315469( 1.00) 550684388( 1.00) 559057784( 5.00) 579851542( 1.00) 353795750( 1.00) 606617589( 1.00) 582407791( 3.00) 497240164( 2.00) 595611698( 2.00) 486412576( 2.00) 477623746( 3.00) 429179215( 2.00) 557292273( 1.00) 614984990( 1.00) 603448532( 1.00) 432354356( 1.00) 554318366( 5.00) 554030686( 1.00) 470019738( 4.00) 551070430( 1.00) 548498785( 1.00) 427608789( 4.00) 553329724( 1.00) 559386673( 1.00) 557349682( 2.00) 545025369( 1.00) 559612772( 1.00) 512229855( 1.00) 530537469( 2.00) 556012153( 1.00) 564930298( 1.00) 558384972( 2.00) 560029132( 1.00) 585518281( 1.00) 474339485( 1.00) 396266685( 1.00) 568300430( 3.00) 538371583( 2.00) 582530115( 5.00) 500153717( 1.00) 571520209( 1.00) 556466311( 2.00) 452170815( 1.00) 471551003( 1.00) 527681469( 2.00) 555114169( 1.00) 545999008( 1.00) 525972312( 2.00) 542688176( 2.00) 462025793( 1.00) 538197388( 3.00) 452524582( 1.00) 565821039( 1.00) 469834479( 2.00) 605816317( 1.00) 244119208( 3.00) 558894174( 1.00) 549618457( 2.00) 597719685( 1.00) 246266512( 1.00) 331537873( 1.00) 471836237( 2.00) 480754686( 1.00) 443776199( 2.00) 560817034( 2.00) 440495772( 3.00) 576701859( 2.00) 245041648( 1.00) 422452011( 2.00) 560166996( 1.00) 561535758( 1.00) 473132613( 1.00) 568370403( 1.00) 553379209( 2.00) 484862925( 1.00) 492458435( 2.00) 522782497( 1.00) 590233885( 1.00) 473995988( 1.00) 520574022( 1.00) 596908584( 2.00) 548131007( 3.00) 592757589( 1.00) 71813330( 1.00) 495850267( 1.00) 562992778( 1.00) 571344051( 1.00) 526526672( 1.00) 402885550( 1.00) 558213197( 1.00) 595795154( 1.00) 563302205( 1.00) 500306853( 1.00) 514349283( 2.00) 617092509( 4.00) 530974534( 1.00) 556804348( 1.00) 576533519( 1.00) 561013521( 1.00) 572273118( 1.00) 567799186( 1.00) 479603283( 1.00) 499092076( 1.00) 267857836( 1.00) 483829115( 1.00) 510459891( 2.00) 495678258( 2.00) 619579359( 1.00) 478260896( 3.00) 476779538( 4.00) 560496382( 1.00) 265922658( 2.00) 557248938( 1.00) 360136232( 2.00) 565272424( 1.00) 561324965( 1.00) 582544116( 2.00) 481113078( 2.00) 611952617( 1.00) 494557830( 1.00) 476623919( 2.00) 343175759( 2.00) 526937385( 1.00) 571380026( 1.00) 571290860( 1.00) 537657392( 1.00) 572385516( 1.00) 384116990( 1.00) 331373772( 1.00) 538287483( 1.00) 427772381( 1.00) 602838908( 1.00) 547785233( 1.00) 560136655( 2.00) 599060987( 1.00) 538899480( 1.00) 410215576( 1.00) 454673351( 2.00) 466051755( 1.00) 553778058( 1.00) 567470070( 1.00) 558272529( 1.00) 549221392( 1.00) 305767814( 2.00) 597198852( 2.00) 424291160( 1.00) 320758257( 1.00) 542486927( 1.00) 468092362( 1.00) 525281611( 1.00) 549510361( 1.00) 521786834( 2.00) 394738799( 1.00) 619226553( 1.00) 479039544( 1.00) 583233455( 2.00) 271611316( 2.00) 565292275( 1.00) 605327432( 1.00) 567534473( 1.00) 560467351( 1.00) 303281558( 1.00) 516550606( 1.00) 475720349( 1.00) 554182714( 1.00) 537513345( 1.00) 413661207( 1.00) 327458072( 1.00) 546688676( 1.00) 479076768( 1.00) 565203489( 1.00) 607090084( 2.00) 568649824( 1.00) 551173409( 1.00) 421755535( 1.00) 578710924( 1.00) 566343879( 1.00) 401987454( 1.00) 592919750( 1.00) 588497353( 1.00) 505642737( 2.00) 549523957( 1.00) 517210958( 1.00) 587994253( 1.00) 538427353( 1.00) 618845409( 1.00) 571154087( 1.00) 600823497( 1.00) 544996526( 1.00) 597533964( 1.00) 544123746( 1.00) 565156153( 1.00)
);
    CALL_FROM_FILE("")<<"Simple test with 300 records and 300 purchases"<<endl;
}


#endif